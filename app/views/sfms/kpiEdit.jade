link(rel='stylesheet' href="css/backend/role.css")
block content
  div.container-fluid(ng-controller="sfmsIndexController")
    span 
      h2 绩效编辑
    jason-form(method="post",source='/sfms/api/kpi/person' name='kpiEdit' conf='paginationConf' tocc="ProjectID,UserID")
      form(name='kpiEdit')
        table.table.table-bordered.table-hover.definedwidth.m10
          tr
            td(width="15%",class="tableleft") 绩效名称
            td
              input(type="textview",name="KPIName",ng-model="paginationConf.formdata.KPIName",ng-maxlength='45',required)
              &nbsp&nbsp
              small.error(ng-if="kpiEdit.KPIName.$error.maxlength && kpiEdit.KPIName.$touched") 绩效分最多45位
              
          tr
            td(width="15%",class="tableleft") 绩效类型
            td
              select(ng-model='paginationConf.formdata.KPIType')
                option(ng-repeat="item in kpitype" value='{{item.DictionaryID}}') {{item.DictionaryValue}}

          tr
            td(width="15%",class="tableleft") 用户名
            td
              jason-select.input( ng-model='paginationConf.formdata.UserID' source='/backuser' stext='UserName' svalue='AccountID' ng-change= "userKpiChanged()")
              select(ng-model='paginationConf.formdata.UserID',name='UserID' ng-change= "userKpiChanged()")
                option   
                option(ng-repeat="item in UserNames" value='{{item.AccountID}}') {{item.UserName}}

          tr
            td(width="15%",class="tableleft") 所属项目
            td
              select(ng-model='paginationConf.formdata.ProjectID',name='ProjectID')
                option   
                option(ng-repeat="item in ProjectNames" value='{{item.ProjectID}}') {{item.ProjectName}}
              
          tr
            td(width="15%",class="tableleft") 绩效分
            td
              input(type="textview",name="KPIScore",ng-model="paginationConf.formdata.KPIScore",ng-maxlength='45',required)
              &nbsp&nbsp
              small.error(ng-if="kpiEdit.KPIScore.$error.maxlength && kpiEdit.KPIScore.$touched") 绩效分最多45位
              
          tr
            td(width="15%",class="tableleft") 用户名
            td
              jason-select.input(ng-model='paginationConf.formdata.UserID' source='/backuser' stext='UserName' svalue='AccountID')
          
          tr
            td(width="15%",class="tableleft") 绩效备注
            td
              textarea(type="textview",rows="5",cols="30",name="Remark",ng-model='paginationConf.formdata.Remark',ng-maxlength='45',required)
              &nbsp&nbsp
              small.error(ng-if="kpiEdit.Remark.$error.maxlength && kpiEdit.Remark.$touched") 备注最多45位

          tr
            td(class="tableleft")
            td
              button.btn.btn-sm.btn-primary(type="submit",ng-click="addnew(formdata,'/sfms/api/kpi')") 确认修改
              &nbsp&nbsp&nbsp&nbsp
              a.btn.btn-sm.btn-success(href='#sfms/kpi',ng-click='search()') 返回列表




      