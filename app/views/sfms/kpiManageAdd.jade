link(rel='stylesheet' href="css/backend/role.css")
block content
  div.container-fluid
    span 
      h2 绩效新增
    form(method="post",name="kpiManageAdd",ng-controller="sfmsApiFinanceAddController" )
      table.table.table-bordered.table-hover.definedwidth.m10
        tr
          td(width="15%",class="tableleft") 绩效名称
          td
            input(type="textview",name='KPIName',ng-model='formdata.KPIName',ng-maxlength='45',required)
            
            small.error(ng-if="kpiManageAdd.FIName.$error.maxlength && kpiManageAdd.FIName.$touched") 绩效名称最多45位 

        tr
          td(width="15%",class="tableleft") 绩效类型
          td
            jason-select.input(name='KPIType',ng-model='formdata.KPIType',source='/datadict/plain',selectparams='{"Category":"dc_kpitype"}',stext='DictionaryValue',svalue='DictionaryID')
                
        tr
          td(width="15%",class="tableleft") 用户名
          td
            jason-select.input(name='UserID',ng-model='formdata.UserID',source='/backuser',stext='UserName',svalue='AccountID',sactive='1',ng-change="userKpiChanged()")

        tr
          td(width="15%",class="tableleft") 所属项目
          td
            select(name='ProjectID',ng-model='formdata.ProjectID') 
              option(ng-repeat="item in ProjectNames" value='{{item.ProjectID}}') {{item.ProjectName}}

        tr
          td(width="15%",class="tableleft") 绩效分
          td
            input(type="number",name="KPIScore",ng-model="formdata.KPIScore",ng-maxlength='45',required)
            
            small.error(ng-if="kpiManageAdd.KPIScore.$error.maxlength && kpiManageAdd.KPIScore.$touched") 绩效分最多45位
       
        tr
          td(width="15%",class="tableleft") 绩效备注
          td
            textarea(type="textview",name="Remark",ng-model='formdata.Remark',rows="5",cols="30",ng-maxlength='45',required)
            
            small.error(ng-if="kpiManageAdd.Remark.$error.maxlength && kpiManageAdd.Remark.$touched") 备注最多45位

        tr
          td(class="tableleft")
          td
            button.btn.btn-sm.btn-primary(type="submit",ng-disabled="kpiManageAdd.$invalid",ng-click="addnew(formdata,'/sfms/api/kpi')") 添加
            
            a.btn.btn-sm.btn-success(href='#sfms/kpiManage',ng-click='search()') 返回列表